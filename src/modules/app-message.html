<app-message>
  <div class='app-message'>
    {message}
    <div class='app-message-dismiss'>
      <a href='javascript:void(0)' onclick={dismiss}>Dismiss</a>
    </div>
  </div>

  <script>
    var Dispatcher = require('../app/dispatcher')

    show(text) {
      this.message = text
      this.root.classList.remove('app-hidden')
    }

    dismiss(ev) {
      this.message = ''
      this.root.classList.add('app-hidden')
    }

    Dispatcher.on('message', function(text) {
      this.show(text)
      this.update()
    }.bind(this))

    Dispatcher.on('message:hide', function(text) {
      this.dismiss()
      this.update()
    }.bind(this))
  </script>
</app-message>
